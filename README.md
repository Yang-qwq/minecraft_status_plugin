# Minecraft状态查询插件

一个用于查询Minecraft服务器状态的机器人插件，支持群组绑定服务器、批量查询等功能。

## 功能特性

- ✅ 查询单个Minecraft服务器状态
- ✅ 群组绑定服务器管理
- ✅ 批量查询群组绑定的服务器
- ✅ 服务器状态格式化显示
- ✅ 支持markdown格式的服务器描述
- ✅ 完善的错误处理和用户提示
- ✅ 命令参数验证和输入检查
- ✅ 健壮的数据处理和类型检查
- ✅ 优雅的错误恢复机制

## 命令列表

| 命令 | 功能 | 格式 |
|------|------|------|
| `/mcs` | 查询服务器状态 | `/mcs [ip:port]` |
| `/mcadd` | 添加服务器到群组 | `/mcadd <名称> <ip:port> [群组ID]` |
| `/mcdel` | 删除群组中的服务器 | `/mcdel <名称> [群组ID]` |
| `/mclist` | 显示群组绑定的服务器 | `/mclist [群组ID]` |
| `/mchelp` | 显示帮助信息 | `/mchelp` |

## 使用示例

### 查询服务器状态
```
/mcs mc.example.com:25565
```

### 添加服务器到群组
```
/mcadd MyServer mc.example.com:25565
/mcadd MyServer mc.example.com:25565 123456789  # 指定群组ID
```

### 删除服务器
```
/mcdel MyServer
/mcdel MyServer 123456789  # 指定群组ID
```

### 查看群组绑定的服务器
```
/mclist
/mclist 123456789  # 指定群组ID
```

## 安装依赖

```bash
pip install mcping>=0.3.0
```

## 配置说明

插件使用持久化数据存储群组绑定的服务器信息，无需额外配置即可使用。

## 开发计划

- [ ] 定时监控功能
- [ ] 服务器状态变更通知
- [ ] 在线玩家列表显示
- [ ] 配置文件支持

## 更新日志

### v0.0.3
- ✅ **代码健壮性改进**：使用 `isinstance()` 替代 `type()` 进行类型检查
- ✅ **错误处理优化**：添加 `try-except` 块和优雅的错误恢复机制
- ✅ **数据安全增强**：使用 `dict.get()` 方法避免键错误
- ✅ **异常安全**：即使描述信息处理失败也能返回基本状态信息
- ✅ **日志记录改进**：添加详细的错误日志记录
- ✅ **代码结构优化**：分离数据提取逻辑，提高可读性
- ✅ **文档完善**：改进方法文档字符串和类型注解

### v0.0.2
- 重构代码结构，提高可维护性
- 添加完善的错误处理
- 改进命令参数验证
- 添加帮助命令
- 优化服务器状态显示格式
- 添加服务器名称验证
- 改进日志记录

### v0.0.1
- 基础服务器状态查询功能
- 群组服务器绑定功能
